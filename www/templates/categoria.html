
<!-- Cotenido buffet -->
<div class="menuplatolist">
  <div class="col-md-12" ng-repeat="dish in dishes">
   <div class="title"><img src="images/{{imageCat}}.png" alt="..." title=".." /><span>{{dish.name}}</span></div>
   <div class="btnts">
     <div id="detalle_{{dish.id}}" class="detalle" ng-click="detailDish(dish)">
      <h1>{{dish.fullname}} <span ng-if="dish.audio != null" ng-click="playAudio(dish)"></span> </h1>
      <p>{{dish.description}}</p>
      <div class="vene" ng-click="detailDish(dish)">
        <div class="col-xs-6 col-md-6">
          <label>Grasas <span>{{dish.grease}}</span></label>
          <label>Proteina <span>{{dish.proteins}}</span></label>
        </div>
        <div class="col-xs-6 col-md-6">
          <label>Carbohidratos <span>{{dish.carbohydrates}}</span></label>
          <label>Calorias <span>{{dish.calories}}</span></label>
        </div>
      </div>
    </div>
    <br>
    <img src="images/menu-menos.png" alt="..." title="..." class="masdetalle btns" />
    <img src="images/lupamenu.png" alt="..." title="..." class="masdetalle btns" ng-click="detailDish(dish)" />
    <img src="images/masmenu.png" alt="..." title="..." class="vermasplato btns" ng-click="addDish(dish)" />
  </div>
  <div class="contimg"><div class="numb">1</div><img id="image_{{dish.code}}" ng-src="{{dish.images}}" /></div>
</div>

</div>
<div class="verplato">
  <img src="images/cerr_vpla.png" alt="..." alt="..." class="cerrves" ng-click="closeDish()">
  <div class="padre">

   <div class = "derrap">

     <div class="contenedor">

       <div class="sopa">
        <img src="images/plato_2.png" style="width:100%;" border="0" margin="0"/>

        <div class="sopacont">
          <img src="images/sopa.png" style="width:100%;" border="0" margin="0"/>
        </div>

      </div>

      <div class="vaso">
        <img src="images/plato_3.png" style="width:100%;" border="0" margin="0"/>

        <div class="jugo">
         <img src="images/jugo.png" style="width:100%;" border="0" margin="0"/>
       </div>

     </div>

     <div class="plato">
       <img src="images/plato.png" style="width:100%;" border="0" margin="0"/>

       <div class="arroz">
        <img src="images/arroz_2.png" style="width:100%;" border="0" margin="0"/>
      </div>

      <div class="guarnicion">
        <img src="images/guarnicion_2.png" style="width:100%;" border="0" margin="0"/>
      </div>

      <div class="carne">
        <img src="images/c109_2.png" style="width:100%;" border="0" margin="0"/>
      </div>

    </div>

  </div>
</div>
</div>
</div>
<div class="costoad">
  <div class="cont">
    <img src="images/cerr_vpla.png" alt="..." alt="..." class="cerrvess">
    <h1>Costo de adición <span>$4.500</span></h1>
    <p>Esta adición elevara el valor del plato por encima de los $9.400</p>
    <div class="ck">
      <label for="ck">No volver a ver este mensaje</label> <input type="checkbox" id="ck" />
    </div>  
  </div>
</div>
<div class="verplatoico"><img src="images/ver_plato.png" alt="..." title="..." class="img1" ng-click="fullDish('buffet')" /></div>
<input id="datos" name="datos" type="hidden" value="{{datos}}" />
<!-- fin contenido buffet -->
<script>
  $.fn.isOnScreen = function(){    
    var win = $(window);    
    var viewport = {
      top : win.scrollTop(),
      left : win.scrollLeft()
    };
    viewport.right = viewport.left + win.width();
    viewport.bottom = viewport.top + win.height();
    
    var bounds = this.offset();
    bounds.right = bounds.left + this.outerWidth();
    bounds.bottom = bounds.top + this.outerHeight();
    
    return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));
    
  };
  function checkLoad(image){
    var load= $('#image_'+image).attr('src');
    var img= 'http://buffetexpress.co/REST/resources/images/dish/'+image+'_1.jpg';
    if(load!=img){
      $('#image_'+image).fadeOut(50, function(){
        $(this).attr('src',img).bind('onreadystatechange load', function(){
          if (this.complete) $(this).fadeIn(300);
       });
      });    
    }
  }

  $( document ).ready(function() {
    $(".detalle").hide();
    $('.menupie').fadeIn();

    $(".container").scroll(function(){ 
     var str= $("#datos").val();
     var data= jQuery.parseJSON(str);

     if ($(this).scrollTop() > 250) {
      $('.menupie').fadeOut();
      $.each(data, function(idx, obj) {
        if($('#image_'+obj.code).isOnScreen()){
          checkLoad(obj.code);
          console.log(obj.code);
        }        
      });      
    } else {            
      $('.menupie').fadeIn();
    }
  });
  setTimeout(function(){$(".btns").fadeIn();}, 1500);
  });
</script>